{"ast":null,"code":"'use strict';\n\nfunction id(e) {\n  return e;\n}\nvar prop = require('../util/prop');\nmodule.exports = function asyncMap(map) {\n  if (!map) return id;\n  map = prop(map);\n  var busy = false,\n    abortCb,\n    aborted;\n  return function (read) {\n    return function next(abort, cb) {\n      if (aborted) return cb(aborted);\n      if (abort) {\n        aborted = abort;\n        if (!busy) read(abort, function (err) {\n          //incase the source has already ended normally,\n          //we should pass our own error.\n          cb(abort);\n        });else read(abort, function (err) {\n          //if we are still busy, wait for the mapper to complete.\n          if (busy) abortCb = cb;else cb(abort);\n        });\n      } else read(null, function (end, data) {\n        if (end) cb(end);else if (aborted) cb(aborted);else {\n          busy = true;\n          map(data, function (err, data) {\n            busy = false;\n            if (aborted) {\n              cb(aborted);\n              abortCb && abortCb(aborted);\n            } else if (err) next(err, cb);else cb(null, data);\n          });\n        }\n      });\n    };\n  };\n};","map":{"version":3,"names":["id","e","prop","require","module","exports","asyncMap","map","busy","abortCb","aborted","read","next","abort","cb","err","end","data"],"sources":["C:/blockchain/Victus-health-assistant-main/Victus-health-assistant-main/node_modules/pull-stream/throughs/async-map.js"],"sourcesContent":["'use strict'\n\nfunction id (e) { return e }\nvar prop = require('../util/prop')\n\nmodule.exports = function asyncMap (map) {\n  if(!map) return id\n  map = prop(map)\n  var busy = false, abortCb, aborted\n  return function (read) {\n    return function next (abort, cb) {\n      if(aborted) return cb(aborted)\n      if(abort) {\n        aborted = abort\n        if(!busy) read(abort, function (err) {\n          //incase the source has already ended normally,\n          //we should pass our own error.\n          cb(abort)\n        })\n        else read(abort, function (err) {\n          //if we are still busy, wait for the mapper to complete.\n          if(busy) abortCb = cb\n          else cb(abort)\n        })\n      }\n      else\n        read(null, function (end, data) {\n          if(end) cb(end)\n          else if(aborted) cb(aborted)\n          else {\n            busy = true\n            map(data, function (err, data) {\n              busy = false\n              if(aborted) {\n                cb(aborted)\n                abortCb && abortCb(aborted)\n              }\n              else if(err) next (err, cb)\n              else cb(null, data)\n            })\n          }\n        })\n    }\n  }\n}\n\n\n\n\n\n\n\n"],"mappings":"AAAA,YAAY;;AAEZ,SAASA,EAAEA,CAAEC,CAAC,EAAE;EAAE,OAAOA,CAAC;AAAC;AAC3B,IAAIC,IAAI,GAAGC,OAAO,CAAC,cAAc,CAAC;AAElCC,MAAM,CAACC,OAAO,GAAG,SAASC,QAAQA,CAAEC,GAAG,EAAE;EACvC,IAAG,CAACA,GAAG,EAAE,OAAOP,EAAE;EAClBO,GAAG,GAAGL,IAAI,CAACK,GAAG,CAAC;EACf,IAAIC,IAAI,GAAG,KAAK;IAAEC,OAAO;IAAEC,OAAO;EAClC,OAAO,UAAUC,IAAI,EAAE;IACrB,OAAO,SAASC,IAAIA,CAAEC,KAAK,EAAEC,EAAE,EAAE;MAC/B,IAAGJ,OAAO,EAAE,OAAOI,EAAE,CAACJ,OAAO,CAAC;MAC9B,IAAGG,KAAK,EAAE;QACRH,OAAO,GAAGG,KAAK;QACf,IAAG,CAACL,IAAI,EAAEG,IAAI,CAACE,KAAK,EAAE,UAAUE,GAAG,EAAE;UACnC;UACA;UACAD,EAAE,CAACD,KAAK,CAAC;QACX,CAAC,CAAC,MACGF,IAAI,CAACE,KAAK,EAAE,UAAUE,GAAG,EAAE;UAC9B;UACA,IAAGP,IAAI,EAAEC,OAAO,GAAGK,EAAE,MAChBA,EAAE,CAACD,KAAK,CAAC;QAChB,CAAC,CAAC;MACJ,CAAC,MAECF,IAAI,CAAC,IAAI,EAAE,UAAUK,GAAG,EAAEC,IAAI,EAAE;QAC9B,IAAGD,GAAG,EAAEF,EAAE,CAACE,GAAG,CAAC,MACV,IAAGN,OAAO,EAAEI,EAAE,CAACJ,OAAO,CAAC,MACvB;UACHF,IAAI,GAAG,IAAI;UACXD,GAAG,CAACU,IAAI,EAAE,UAAUF,GAAG,EAAEE,IAAI,EAAE;YAC7BT,IAAI,GAAG,KAAK;YACZ,IAAGE,OAAO,EAAE;cACVI,EAAE,CAACJ,OAAO,CAAC;cACXD,OAAO,IAAIA,OAAO,CAACC,OAAO,CAAC;YAC7B,CAAC,MACI,IAAGK,GAAG,EAAEH,IAAI,CAAEG,GAAG,EAAED,EAAE,CAAC,MACtBA,EAAE,CAAC,IAAI,EAAEG,IAAI,CAAC;UACrB,CAAC,CAAC;QACJ;MACF,CAAC,CAAC;IACN,CAAC;EACH,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"script"}