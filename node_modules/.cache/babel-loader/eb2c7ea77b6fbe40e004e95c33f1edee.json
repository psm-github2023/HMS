{"ast":null,"code":"'use strict';\n\nconst moduleConfig = require('../utils/module-config');\nconst Stream = require('readable-stream');\nconst IsIpfs = require('is-ipfs');\nconst cleanCID = require('../utils/clean-cid');\nmodule.exports = arg => {\n  const send = moduleConfig(arg);\n  return (args, opts, callback) => {\n    if (typeof opts === 'function') {\n      callback = opts;\n      opts = {};\n    }\n    try {\n      args = cleanCID(args);\n    } catch (err) {\n      if (!IsIpfs.ipfsPath(args)) {\n        return callback(err);\n      }\n    }\n    const pt = new Stream.PassThrough({\n      objectMode: true\n    });\n    send({\n      path: 'ls',\n      args: args,\n      qs: opts\n    }, (err, results) => {\n      if (err) {\n        return callback(err);\n      }\n      let result = results.Objects;\n      if (!result) {\n        return callback(new Error('expected .Objects in results'));\n      }\n      result = result[0];\n      if (!result) {\n        return callback(new Error('expected one array in results.Objects'));\n      }\n      result = result.Links;\n      if (!Array.isArray(result)) {\n        return callback(new Error('expected one array in results.Objects[0].Links'));\n      }\n      result = result.map(link => ({\n        depth: 1,\n        name: link.Name,\n        path: args + '/' + link.Name,\n        size: link.Size,\n        hash: link.Hash,\n        type: typeOf(link)\n      }));\n      result.forEach(item => pt.write(item));\n      pt.end();\n    });\n    return pt;\n  };\n};\nfunction typeOf(link) {\n  switch (link.Type) {\n    case 1:\n    case 5:\n      return 'dir';\n    case 2:\n      return 'file';\n    default:\n      return 'unknown';\n  }\n}","map":{"version":3,"names":["moduleConfig","require","Stream","IsIpfs","cleanCID","module","exports","arg","send","args","opts","callback","err","ipfsPath","pt","PassThrough","objectMode","path","qs","results","result","Objects","Error","Links","Array","isArray","map","link","depth","name","Name","size","Size","hash","Hash","type","typeOf","forEach","item","write","end","Type"],"sources":["C:/blockchain/Victus-health-assistant-main/Victus-health-assistant-main/node_modules/ipfs-http-client/src/files-regular/ls-readable-stream.js"],"sourcesContent":["'use strict'\n\nconst moduleConfig = require('../utils/module-config')\nconst Stream = require('readable-stream')\nconst IsIpfs = require('is-ipfs')\nconst cleanCID = require('../utils/clean-cid')\n\nmodule.exports = (arg) => {\n  const send = moduleConfig(arg)\n\n  return (args, opts, callback) => {\n    if (typeof (opts) === 'function') {\n      callback = opts\n      opts = {}\n    }\n\n    try {\n      args = cleanCID(args)\n    } catch (err) {\n      if (!IsIpfs.ipfsPath(args)) {\n        return callback(err)\n      }\n    }\n\n    const pt = new Stream.PassThrough({ objectMode: true })\n\n    send({ path: 'ls', args: args, qs: opts }, (err, results) => {\n      if (err) { return callback(err) }\n\n      let result = results.Objects\n      if (!result) {\n        return callback(new Error('expected .Objects in results'))\n      }\n\n      result = result[0]\n      if (!result) {\n        return callback(new Error('expected one array in results.Objects'))\n      }\n\n      result = result.Links\n      if (!Array.isArray(result)) {\n        return callback(new Error('expected one array in results.Objects[0].Links'))\n      }\n\n      result = result.map((link) => ({\n        depth: 1,\n        name: link.Name,\n        path: args + '/' + link.Name,\n        size: link.Size,\n        hash: link.Hash,\n        type: typeOf(link)\n      }))\n\n      result.forEach((item) => pt.write(item))\n      pt.end()\n    })\n\n    return pt\n  }\n}\n\nfunction typeOf (link) {\n  switch (link.Type) {\n    case 1:\n    case 5:\n      return 'dir'\n    case 2:\n      return 'file'\n    default:\n      return 'unknown'\n  }\n}\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,YAAY,GAAGC,OAAO,CAAC,wBAAwB,CAAC;AACtD,MAAMC,MAAM,GAAGD,OAAO,CAAC,iBAAiB,CAAC;AACzC,MAAME,MAAM,GAAGF,OAAO,CAAC,SAAS,CAAC;AACjC,MAAMG,QAAQ,GAAGH,OAAO,CAAC,oBAAoB,CAAC;AAE9CI,MAAM,CAACC,OAAO,GAAIC,GAAG,IAAK;EACxB,MAAMC,IAAI,GAAGR,YAAY,CAACO,GAAG,CAAC;EAE9B,OAAO,CAACE,IAAI,EAAEC,IAAI,EAAEC,QAAQ,KAAK;IAC/B,IAAI,OAAQD,IAAK,KAAK,UAAU,EAAE;MAChCC,QAAQ,GAAGD,IAAI;MACfA,IAAI,GAAG,CAAC,CAAC;IACX;IAEA,IAAI;MACFD,IAAI,GAAGL,QAAQ,CAACK,IAAI,CAAC;IACvB,CAAC,CAAC,OAAOG,GAAG,EAAE;MACZ,IAAI,CAACT,MAAM,CAACU,QAAQ,CAACJ,IAAI,CAAC,EAAE;QAC1B,OAAOE,QAAQ,CAACC,GAAG,CAAC;MACtB;IACF;IAEA,MAAME,EAAE,GAAG,IAAIZ,MAAM,CAACa,WAAW,CAAC;MAAEC,UAAU,EAAE;IAAK,CAAC,CAAC;IAEvDR,IAAI,CAAC;MAAES,IAAI,EAAE,IAAI;MAAER,IAAI,EAAEA,IAAI;MAAES,EAAE,EAAER;IAAK,CAAC,EAAE,CAACE,GAAG,EAAEO,OAAO,KAAK;MAC3D,IAAIP,GAAG,EAAE;QAAE,OAAOD,QAAQ,CAACC,GAAG,CAAC;MAAC;MAEhC,IAAIQ,MAAM,GAAGD,OAAO,CAACE,OAAO;MAC5B,IAAI,CAACD,MAAM,EAAE;QACX,OAAOT,QAAQ,CAAC,IAAIW,KAAK,CAAC,8BAA8B,CAAC,CAAC;MAC5D;MAEAF,MAAM,GAAGA,MAAM,CAAC,CAAC,CAAC;MAClB,IAAI,CAACA,MAAM,EAAE;QACX,OAAOT,QAAQ,CAAC,IAAIW,KAAK,CAAC,uCAAuC,CAAC,CAAC;MACrE;MAEAF,MAAM,GAAGA,MAAM,CAACG,KAAK;MACrB,IAAI,CAACC,KAAK,CAACC,OAAO,CAACL,MAAM,CAAC,EAAE;QAC1B,OAAOT,QAAQ,CAAC,IAAIW,KAAK,CAAC,gDAAgD,CAAC,CAAC;MAC9E;MAEAF,MAAM,GAAGA,MAAM,CAACM,GAAG,CAAEC,IAAI,KAAM;QAC7BC,KAAK,EAAE,CAAC;QACRC,IAAI,EAAEF,IAAI,CAACG,IAAI;QACfb,IAAI,EAAER,IAAI,GAAG,GAAG,GAAGkB,IAAI,CAACG,IAAI;QAC5BC,IAAI,EAAEJ,IAAI,CAACK,IAAI;QACfC,IAAI,EAAEN,IAAI,CAACO,IAAI;QACfC,IAAI,EAAEC,MAAM,CAACT,IAAI;MACnB,CAAC,CAAC,CAAC;MAEHP,MAAM,CAACiB,OAAO,CAAEC,IAAI,IAAKxB,EAAE,CAACyB,KAAK,CAACD,IAAI,CAAC,CAAC;MACxCxB,EAAE,CAAC0B,GAAG,CAAC,CAAC;IACV,CAAC,CAAC;IAEF,OAAO1B,EAAE;EACX,CAAC;AACH,CAAC;AAED,SAASsB,MAAMA,CAAET,IAAI,EAAE;EACrB,QAAQA,IAAI,CAACc,IAAI;IACf,KAAK,CAAC;IACN,KAAK,CAAC;MACJ,OAAO,KAAK;IACd,KAAK,CAAC;MACJ,OAAO,MAAM;IACf;MACE,OAAO,SAAS;EACpB;AACF"},"metadata":{},"sourceType":"script"}